HipHop MQTT
===========

![branch workflow](https://github.com/manuel-serrano/hhmqtt/actions/workflows/hhmqtt.yml/badge.svg)

This repository shows and illustrates how to program MQTT applications 
with Hiphop.


Installation
------------

You have two installation methods depending on whether you have a github
account or not.

Installation with a Github account
----------------------------------

To install the package in the current directory, execute the
following commands:

```
npm install https://github.com/manuel-serrano/hhmqtt.git
cd node_modules/@hop/hhmqtt
npm install
npm run build
```

Installation without a Github account
-------------------------------------

To install the package, first download the ZIP file from github
available at `https://github.com/manuel-serrano/hhmqtt.git`
(you don't need an account for that). The ZIP file is located 
at:

https://github.com/manuel-serrano/hhmqtt/archive/refs/heads/master.zip

```
wget https://github.com/manuel-serrano/hhmqtt/archive/refs/heads/master.zip
unzip master.zip
cd hhmqtt-master/
npm install
npm run build
```

Testing and Running
-------------------

To test:

```
npm test
```

To run the application:

```
npm start click
```

In this command line, `click` is an option. To see the whole list of
supported options, use:

```
npm start
```


Modifying and re-compiling the sources
--------------------------------------

> [!NOTE] 
> The sources are located in the `./src` directory. These are the only
> files that should be edited. All the other files are generated by
> each new build.

To compile the source files after a modification:

```
npm run build
```

The generated files are located in the `dist` directory.


Configuring the examples
------------------------

> [!WARNING]
> To keep it as simple as possible, each example 
> (`click`, `clicktmt`, ...) uses an explicit list of supported Zigbee 
> devices that are referenced by their IEEE address. This means that 
> this code need to be adapted to your personnal configuration. Check 
> the definitions of the `topics` JavaScript constant. These are the 
> places where the IEEE addresses have to be customized. 

Considering using an external configuration file is an option that
should be considered in the future to avoid modifying the common
implementation.
